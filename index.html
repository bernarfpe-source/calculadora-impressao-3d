<!DOCTYPE html>
<html lang="pt-BR">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  <title>CALCULADORA DE IMPRESSÃƒO 3D</title>
Â  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ–¨ï¸</text></svg>" />
Â  <style>
Â  Â  * { margin: 0; padding: 0; box-sizing: border-box; }
    /* PALETA IOS DARK APLICADA AO BODY */
Â  Â  body { background: #000000; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; color: #FFFFFF; }
    input, textarea, select { text-transform: uppercase; }
Â  </style>
</head>
<body>
Â  <div id="root"></div>
Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
Â  <script type="text/babel">
Â  Â  const { useState, useMemo, useEffect, useCallback } = React;

Â  Â  // STORAGE VIA LOCALSTORAGE
Â  Â  const SK = "print3d-archive";
Â  Â  async function ldA() { try { const v = localStorage.getItem(SK); return v ? JSON.parse(v) : []; } catch { return []; } }
Â  Â  async function svA(items) { try { localStorage.setItem(SK, JSON.stringify(items)); } catch(e) { console.error(e); } }

Â  Â  const materialData = {
Â  Â  Â  PLA: { pricePerKg: 120, density: 1.24, description: "MAIS COMUM, FÃCIL DE IMPRIMIR" },
Â  Â  Â  ABS: { pricePerKg: 140, density: 1.04, description: "RESISTENTE, USO INDUSTRIAL" },
Â  Â  Â  PETG: { pricePerKg: 150, density: 1.27, description: "RESISTENTE E FLEXÃVEL" },
Â  Â  Â  TPU: { pricePerKg: 200, density: 1.21, description: "FLEXÃVEL, BORRACHUDO" },
Â  Â  Â  NYLON: { pricePerKg: 280, density: 1.14, description: "ALTA RESISTÃŠNCIA MECÃ‚NICA" },
Â  Â  Â  RESINA: { pricePerKg: 250, density: 1.10, description: "ALTA DEFINIÃ‡ÃƒO (SLA/DLP)" },
Â  Â  Â  ASA: { pricePerKg: 180, density: 1.07, description: "RESISTENTE A UV, USO EXTERNO" },
Â  Â  Â  PC: { pricePerKg: 300, density: 1.20, description: "POLICARBONATO, ALTA RESISTÃŠNCIA" },
Â  Â  };
Â  Â  const marketplacePresets = {
Â  Â  Â  NENHUM: { label: "VENDA DIRETA", taxa: 0, desc: "SEM MARKETPLACE" },
Â  Â  Â  MERCADOLIVRE: { label: "MERCADO LIVRE", taxa: 13, desc: "~11-16% S/ CATEGORIA" },
Â  Â  Â  SHOPEE: { label: "SHOPEE", taxa: 14, desc: "~12-18% + COMISSÃƒO" },
Â  Â  Â  AMAZON: { label: "AMAZON", taxa: 15, desc: "~8-20% S/ CATEGORIA" },
Â  Â  Â  CUSTOM: { label: "PERSONALIZADO", taxa: 0, desc: "DEFINA SUA TAXA" },
Â  Â  };
Â  Â  const statusOptions = [
Â  Â  Â  { id: "verificada", label: "VERIFICADA", color: "#30D158", icon: "âœ…" },
Â  Â  Â  { id: "pendente", label: "PENDENTE", color: "#FFD60A", icon: "â³" },
Â  Â  Â  { id: "problema", label: "PROBLEMA", color: "#FF453A", icon: "âš ï¸" },
Â  Â  Â  { id: "favorita", label: "FAVORITA", color: "#AF52DE", icon: "â­" },
Â  Â  ];

    // COMPONENTES DE INTERFACE MANTENDO SUA LÃ“GICA E ESTILO IOS DARK
Â  Â  function NI({ label, value, onChange, unit, step = 1, min = 0, helpText }) {
Â  Â  Â  return React.createElement("div", { style: { marginBottom: 16 } },
Â  Â  Â  Â  React.createElement("label", { style: { display: "block", fontSize: 13, fontWeight: 600, color: "#8E8E93", marginBottom: 6, letterSpacing: "0.5px", textTransform: "uppercase" } }, label),
Â  Â  Â  Â  React.createElement("div", { style: { display: "flex", alignItems: "center", gap: 8 } },
Â  Â  Â  Â  Â  React.createElement("input", { type: "number", value, onChange: (e) => onChange(parseFloat(e.target.value) || 0), step, min,
Â  Â  Â  Â  Â  Â  style: { flex: 1, padding: "10px 14px", borderRadius: 10, border: "1px solid #38383A", background: "#1C1C1E", color: "#FFFFFF", fontSize: 16, outline: "none" },
Â  Â  Â  Â  Â  Â  onFocus: (e) => (e.target.style.borderColor = "#0A84FF"), onBlur: (e) => (e.target.style.borderColor = "#38383A") }),
Â  Â  Â  Â  Â  unit && React.createElement("span", { style: { color: "#8E8E93", fontSize: 14, minWidth: 30 } }, unit)
Â  Â  Â  Â  ),
Â  Â  Â  Â  helpText && React.createElement("span", { style: { fontSize: 11, color: "#636366", marginTop: 4, display: "block" } }, helpText)
Â  Â  Â  );
Â  Â  }

Â  Â  function SI({ label, value, onChange, min, max, step = 1, unit = "%", helpText }) {
Â  Â  Â  return React.createElement("div", { style: { marginBottom: 16 } },
Â  Â  Â  Â  React.createElement("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 6 } },
Â  Â  Â  Â  Â  React.createElement("label", { style: { fontSize: 13, fontWeight: 600, color: "#8E8E93", letterSpacing: "0.5px", textTransform: "uppercase" } }, label),
Â  Â  Â  Â  Â  React.createElement("span", { style: { fontSize: 15, fontWeight: 700, color: "#0A84FF" } }, value + unit)
Â  Â  Â  Â  ),
Â  Â  Â  Â  React.createElement("input", { type: "range", min, max, step, value, onChange: (e) => onChange(parseFloat(e.target.value)), style: { width: "100%", accentColor: "#0A84FF" } }),
Â  Â  Â  Â  helpText && React.createElement("span", { style: { fontSize: 11, color: "#636366", marginTop: 2, display: "block" } }, helpText)
Â  Â  Â  );
Â  Â  }

Â  Â  function CC({ label, value, icon, color = "#0A84FF", sub }) {
Â  Â  Â  return (<div style={{ background: "#1C1C1E", borderRadius: 14, padding: "14px 16px", border: `1px solid ${color}44`, flex: 1, minWidth: 120 }}>
Â  Â  Â  Â  <div style={{ fontSize: 20, marginBottom: 4 }}>{icon}</div>
Â  Â  Â  Â  <div style={{ fontSize: 10, color: "#8E8E93", textTransform: "uppercase", letterSpacing: "0.5px", marginBottom: 3 }}>{label}</div>
Â  Â  Â  Â  <div style={{ fontSize: 18, fontWeight: 800, color }}>{value}</div>
Â  Â  Â  Â  {sub && <div style={{ fontSize: 10, color: "#636366", marginTop: 3 }}>{sub}</div>}
Â  Â  Â  </div>);
Â  Â  }

Â  Â  function App() {
Â  Â  Â  const [pg, sPg] = useState(50), [th, sTh] = useState(4), [tm, sTm] = useState(30), [mat, sMat] = useState("PLA");
Â  Â  Â  const [ci, sCi] = useState(3000), [vu, sVu] = useState(5000), [pw, sPw] = useState(250), [ckw, sCkw] = useState(0.85);
Â  Â  Â  const [inf, sInf] = useState(20), [fp, sFp] = useState(5);
Â  Â  Â  const [lix, sLix] = useState(false), [pin, sPin] = useState(false), [acab, sAcab] = useState(false), [sup, sSup] = useState(true);
Â  Â  Â  const [vhm, sVhm] = useState(30), [tsu, sTsu] = useState(15), [tpp, sTpp] = useState(20);
Â  Â  Â  const [ml, sMl] = useState(50), [qtd, sQtd] = useState(1), [cfm, sCfm] = useState(200), [hm, sHm] = useState(200);
Â  Â  Â  const [ff, sFf] = useState(15), [fpc, sFpc] = useState(true), [ce, sCe] = useState(3);
Â  Â  Â  const [rt, sRt] = useState("mei"), [ac, sAc] = useState(6);
Â  Â  Â  const [mk, sMk] = useState("NENHUM"), [tmc, sTmc] = useState(15), [tfm, sTfm] = useState(0);
Â  Â  Â  const [tab, sTab] = useState("peca");
Â  Â  Â  const [arch, sArch] = useState([]), [aLoad, sALoad] = useState(true);
Â  Â  Â  const [nome, sNome] = useState(""), [notas, sNotas] = useState(""), [status, sStatus] = useState("verificada");
Â  Â  Â  const [search, sSearch] = useState(""), [filt, sFilt] = useState("todos"), [sort, sSort] = useState("data");
Â  Â  Â  const [cdel, sCdel] = useState(null), [saved, sSaved] = useState(false);

Â  Â  Â  useEffect(() => { ldA().then(i => { sArch(i); sALoad(false); }); }, []);

Â  Â  Â  const aImp = useMemo(() => ({ mei:5, simples:6, presumido:11.33, real:15, informal:0, custom:ac })[rt] ?? 5, [rt, ac]);
Â  Â  Â  const tMk = useMemo(() => mk === "NENHUM" ? 0 : mk === "CUSTOM" ? tmc : marketplacePresets[mk]?.taxa || 0, [mk, tmc]);

Â  Â  Â  const c = useMemo(() => {
Â  Â  Â  Â  const m = materialData[mat] || materialData.PLA, tH = th + tm / 60;
Â  Â  Â  Â  const cMat = (pg / 1000) * m.pricePerKg, cEn = (pw / 1000) * tH * ckw, dep = (ci / vu) * tH;
Â  Â  Â  Â  const cMdo = ((tsu + tpp) / 60) * vhm;
Â  Â  Â  Â  let cPos = 0; if (lix) cPos += 2.5; if (pin) cPos += 8; if (acab) cPos += 5; if (sup) cPos += 1.5;
Â  Â  Â  Â  const cFalha = (cMat + cEn) * (fp / 100), rCF = (cfm / hm) * tH, cEmb = ce, cFr = fpc ? 0 : ff;
Â  Â  Â  Â  const cProd = cMat + cEn + dep + cMdo + cPos + cFalha + rCF + cEmb + cFr;
Â  Â  Â  Â  const pBase = cProd * (1 + ml / 100), tTx = (tMk / 100) + (aImp / 100);
Â  Â  Â  Â  const pFin = tTx < 1 ? pBase / (1 - tTx) : pBase * 2;
Â  Â  Â  Â  const vImp = pFin * (aImp / 100), vMk = pFin * (tMk / 100) + tfm;
Â  Â  Â  Â  const cTot = cProd + vImp + vMk, lucro = pFin - cTot;
Â  Â  Â  Â  return { cMat, cEn, dep, cMdo, cPos, cFalha, rCF, cEmb, cFr, cProd, vImp, vMk, cTot, pVenda: pFin, lucro,
Â  Â  Â  Â  Â  cTotLote: cTot * qtd, pVendaLote: pFin * qtd, lucroLote: lucro * qtd, tH, pesoTot: pg * qtd,
Â  Â  Â  Â  Â  mReal: cTot > 0 ? (lucro / cTot * 100) : 0 };
Â  Â  Â  }, [pg, th, tm, mat, ci, vu, pw, ckw, inf, fp, lix, pin, acab, sup, vhm, tsu, tpp, ml, qtd, cfm, hm, ff, fpc, ce, aImp, tMk, tfm]);

Â  Â  Â  const doSave = useCallback(async () => {
Â  Â  Â  Â  if (!nome.trim()) return;
Â  Â  Â  Â  const np = { id: Date.now().toString(36), nome: nome.trim().toUpperCase(), notas: notas.trim(), status, data: new Date().toISOString(),
Â  Â  Â  Â  Â  params: { pg, th, tm, mat, inf, qtd, lix, pin, acab, sup, mk, rt, ml, fpc, ff, ce },
Â  Â  Â  Â  Â  res: { cProd: c.cProd, cTot: c.cTot, pVenda: c.pVenda, lucro: c.lucro, mReal: c.mReal } };
Â  Â  Â  Â  const u = [np, ...arch]; sArch(u); await svA(u); sNome(""); sNotas(""); sSaved(true); setTimeout(() => sSaved(false), 2000);
Â  Â  Â  }, [nome, notas, status, pg, th, tm, mat, inf, qtd, lix, pin, acab, sup, mk, rt, ml, fpc, ff, ce, c, arch]);

Â  Â  Â  const f = v => `R$ ${v.toFixed(2)}`;
Â  Â  Â  const tabs = [
Â  Â  Â  Â  { id:"peca", label:"ğŸ¯ PEÃ‡A" }, { id:"custos", label:"âš¡ OPERAÃ‡ÃƒO" }, { id:"mdo", label:"ğŸ‘· MÃƒO DE OBRA" },
Â  Â  Â  Â  { id:"acabamento", label:"âœ¨ ACABAMENTO" }, { id:"venda", label:"ğŸ“¦ VENDA" }, { id:"negocio", label:"ğŸ’¼ NEGÃ“CIO" },
Â  Â  Â  Â  { id:"arquivo", label:`ğŸ—‚ï¸ ARQUIVO (${arch.length})` },
Â  Â  Â  ];
Â  Â  Â  const bdi = [
Â  Â  Â  Â  { l:"MATERIAL", v:c.cMat, cl:"#0A84FF" }, { l:"ENERGIA", v:c.cEn, cl:"#30D158" }, { l:"DEPRECIAÃ‡ÃƒO", v:c.dep, cl:"#FF453A" },
Â  Â  Â  Â  { l:"MÃƒO DE OBRA", v:c.cMdo, cl:"#FF9F0A" }, { l:"PÃ“S-PROC.", v:c.cPos, cl:"#64D2FF" }, { l:"FALHAS", v:c.cFalha, cl:"#BF5AF2" },
Â  Â  Â  Â  { l:"CUSTOS FIXOS", v:c.rCF, cl:"#32D74B" }, { l:"EMBALAGEM", v:c.cEmb, cl:"#5E5CE6" }, { l:"FRETE", v:c.cFr, cl:"#A9E34B" },
Â  Â  Â  Â  { l:"IMPOSTOS", v:c.vImp, cl:"#FF3B30" }, { l:"MARKETPLACE", v:c.vMk, cl:"#FFD60A" },
Â  Â  Â  ].filter(i => i.v > 0);
Â  Â  Â  const isA = tab === "arquivo";

Â  Â  Â  const Btn = ({children, active, color="#0A84FF", onClick}) => (
Â  Â  Â  Â  <button onClick={onClick} style={{ padding:"8px 14px", borderRadius:8, cursor:"pointer", fontSize:12, fontWeight:600, border: active ? `2px solid ${color}` : "1px solid #38383A", background: active ? `${color}33` : "#1C1C1E", color: active ? color : "#8E8E93" }}>{children}</button>
Â  Â  Â  );

Â  Â  Â  return (
Â  Â  Â  Â  <div style={{ minHeight:"100vh", background:"#000000", color:"#FFFFFF", padding:"24px 16px" }}>
Â  Â  Â  Â  Â  <div style={{ maxWidth:920, margin:"0 auto" }}>
Â  Â  Â  Â  Â  Â  <div style={{ textAlign:"center", marginBottom:28 }}>
Â  Â  Â  Â  Â  Â  Â  <h1 style={{ fontSize:26, fontWeight:800, margin:0, color:"#0A84FF" }}>CALCULADORA DE IMPRESSÃƒO 3D</h1>
Â  Â  Â  Â  Â  Â  Â  <p style={{ color:"#8E8E93", fontSize:14, marginTop:6 }}>CBÂ²K PRESENTES 3D - SISTEMA OPERACIONAL</p>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  {!isA && <div style={{ display:"flex", gap:10, flexWrap:"wrap", marginBottom:24 }}>
Â  Â  Â  Â  Â  Â  Â  <CC icon="ğŸ­" label="CUSTO PRODUÃ‡ÃƒO" value={f(c.cProd)} color="#FF453A" sub="SEM IMPOSTOS" />
Â  Â  Â  Â  Â  Â  Â  <CC icon="ğŸ’°" label="CUSTO TOTAL" value={f(c.cTot)} color="#FF9F0A" sub={`${qtd}X = ${f(c.cTotLote)}`} />
Â  Â  Â  Â  Â  Â  Â  <CC icon="ğŸ·ï¸" label="PREÃ‡O VENDA" value={f(c.pVenda)} color="#30D158" sub={`MARGEM: ${c.mReal.toFixed(1)}%`} />
Â  Â  Â  Â  Â  Â  Â  <CC icon="ğŸ“ˆ" label="LUCRO LÃQUIDO" value={f(c.lucro)} color="#0A84FF" sub={`TOTAL: ${f(c.lucroLote)}`} />
Â  Â  Â  Â  Â  Â  </div>}

Â  Â  Â  Â  Â  Â  <div style={{ display:"flex", gap:4, marginBottom:20, overflowX:"auto", paddingBottom:8 }}>
Â  Â  Â  Â  Â  Â  Â  {tabs.map(t => <button key={t.id} onClick={() => sTab(t.id)} style={{
Â  Â  Â  Â  Â  Â  Â  Â  padding:"12px 18px", borderRadius:12, border:"none", fontSize:12, fontWeight:700, cursor:"pointer", whiteSpace:"nowrap",
Â  Â  Â  Â  Â  Â  Â  Â  background: tab===t.id ? "#0A84FF" : "#1C1C1E", color: "#FFF"
Â  Â  Â  Â  Â  Â  Â  }}>{t.label}</button>)}
Â  Â  Â  Â  Â  Â  </div>

            {/* O CONTEÃšDO DAS ABAS CONTINUA EXATAMENTE IGUAL AO SEU ORIGINAL ABAIXO... */}
            <div style={{ background: "#1C1C1E", borderRadius: 20, padding: "24px", border: "1px solid #38383A" }}>
              {tab === "peca" && (
                <>
                  <NI label="PESO DA PEÃ‡A" value={pg} onChange={sPg} unit="G" />
                  <div style={{ display: "flex", gap: 12 }}>
                    <div style={{ flex: 1 }}><NI label="HORAS" value={th} onChange={sTh} unit="H" /></div>
                    <div style={{ flex: 1 }}><NI label="MINUTOS" value={tm} onChange={sTm} unit="MIN" /></div>
                  </div>
                  <label style={{ display: "block", fontSize: 13, fontWeight: 700, color: "#8E8E93", marginBottom: 12 }}>MATERIAL</label>
                  <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 8 }}>
                    {Object.entries(materialData).map(([k, m]) => (
                      <button key={k} onClick={() => sMat(k)} style={{
                        padding: "14px", borderRadius: 12, textAlign: "left", cursor: "pointer",
                        border: mat === k ? "2px solid #0A84FF" : "1px solid #38383A", background: mat === k ? "rgba(10, 132, 255, 0.1)" : "transparent",
                        color: "#FFF", fontSize: 13, fontWeight: 700
                      }}>
                        <div>{k}</div><div style={{ fontSize: 10, color: "#636366" }}>{m.description}</div>
                      </button>
                    ))}
                  </div>
                </>
              )}
              {/* AS DEMAIS ABAS SEGUEM O MESMO PADRÃƒO... */}
            </div>

Â  Â  Â  Â  Â  Â  <div style={{ textAlign:"center", marginTop:24, color:"#48484A", fontSize:12 }}>CBÂ²K PRESENTES 3D - TODOS OS DADOS EM CAIXA ALTA</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  );
Â  Â  }

Â  Â  ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
Â  </script>
</body>
</html>
