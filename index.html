<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CALCULADORA 3D - CB²K</title>
  <style>
    /* DESIGN IOS DARK MODE */
    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }
    body { background: #000000; font-family: -apple-system, BlinkMacSystemFont, sans-serif; color: #FFFFFF; text-transform: uppercase; }
    #root { padding: 20px; max-width: 600px; margin: 0 auto; }
    .card { background: #1C1C1E; border-radius: 14px; padding: 15px; border: 0.5px solid #38383A; margin-bottom: 10px; }
    input, select { width: 100%; padding: 12px; background: #2C2C2E; border: none; border-radius: 10px; color: #FFFFFF; margin-top: 5px; text-transform: uppercase; font-weight: 600; }
    label { font-size: 11px; color: #8E8E93; font-weight: 700; }
    button { cursor: pointer; text-transform: uppercase; border: none; }
    .btn-tab { padding: 10px; border-radius: 10px; background: #1C1C1E; color: #8E8E93; font-weight: 700; flex: 1; margin: 2px; }
    .btn-active { background: #0A84FF; color: #FFFFFF; }
    .result-val { font-size: 18px; font-weight: 800; }
  </style>
</head>
<body>
  <div id="root">CARREGANDO SISTEMA...</div>

  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useMemo, useEffect } = React;

    function App() {
      // ESTADOS ORIGINAIS MANTIDOS
      const [pg, sPg] = useState(50);
      const [th, sTh] = useState(4);
      const [tm, sTm] = useState(30);
      const [mat, sMat] = useState("PLA");
      const [ci, sCi] = useState(3000);
      const [vu, sVu] = useState(5000);
      const [pw, sPw] = useState(250);
      const [ckw, sCkw] = useState(0.85);
      const [ml, sMl] = useState(50);
      const [tab, sTab] = useState("PEÇA");

      // LÓGICA DE CÁLCULO INTEGRAL
      const c = useMemo(() => {
        const tH = th + tm / 60;
        const cMat = (pg / 1000) * 120; // PREÇO MÉDIO PLA
        const cEn = (pw / 1000) * tH * ckw;
        const dep = (ci / vu) * tH;
        const cProd = cMat + cEn + dep;
        const pFin = cProd * (1 + ml / 100) / 0.85; 
        return { 
          venda: `R$ ${pFin.toFixed(2)}`, 
          lucro: `R$ ${(pFin - cProd).toFixed(2)}` 
        };
      }, [pg, th, tm, ci, vu, pw, ckw, ml]);

      return (
        <div>
          <header style={{ textAlign: "center", marginBottom: "25px" }}>
            <h1 style={{ color: "#0A84FF", fontSize: "22px" }}>CALCULADORA CB²K</h1>
            <div style={{ fontSize: "10px", color: "#8E8E93" }}>SISTEMA OPERACIONAL 3D</div>
          </header>

          <div style={{ display: "flex", gap: "10px", marginBottom: "20px" }}>
            <div className="card" style={{ flex: 1 }}>
              <label>VENDA</label>
              <div className="result-val" style={{ color: "#32D74B" }}>{c.venda}</div>
            </div>
            <div className="card" style={{ flex: 1 }}>
              <label>LUCRO</label>
              <div className="result-val" style={{ color: "#0A84FF" }}>{c.lucro}</div>
            </div>
          </div>

          <div style={{ display: "flex", marginBottom: "20px" }}>
            {["PEÇA", "MÁQUINA", "MARGEM"].map(t => (
              <button key={t} onClick={() => sTab(t)} className={`btn-tab ${tab === t ? 'btn-active' : ''}`}>{t}</button>
            ))}
          </div>

          <div className="card">
            {tab === "PEÇA" && (
              <>
                <label>PESO ESTIMADO (G)</label>
                <input type="number" value={pg} onChange={e => sPg(parseFloat(e.target.value)||0)} />
                <div style={{ display: "flex", gap: "10px", marginTop: "15px" }}>
                  <div style={{ flex: 1 }}><label>HORAS</label><input type="number" value={th} onChange={e => sTh(parseInt(e.target.value)||0)} /></div>
                  <div style={{ flex: 1 }}><label>MINUTOS</label><input type="number" value={tm} onChange={e => sTm(parseInt(e.target.value)||0)} /></div>
                </div>
              </>
            )}
            {tab === "MÁQUINA" && (
              <>
                <label>VALOR DA IMPRESSORA (R$)</label>
                <input type="number" value={ci} onChange={e => sCi(parseFloat(e.target.value)||0)} />
                <label style={{ display: "block", marginTop: "15px" }}>CUSTO KWH (R$)</label>
                <input type="number" value={ckw} onChange={e => sCkw(parseFloat(e.target.value)||0)} />
              </>
            )}
            {tab === "MARGEM" && (
              <>
                <label>LUCRO DESEJADO: {ml}%</label>
                <input type="range" min="0" max="200" value={ml} onChange={e => sMl(e.target.value)} style={{ accentColor: "#0A84FF", marginTop: "10px" }} />
              </>
            )}
          </div>

          <footer style={{ textAlign: "center", marginTop: "30px", fontSize: "10px", color: "#48484A" }}>
            © 2026 CB²K PRESENTES 3D - BRASÍLIA
          </footer>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
