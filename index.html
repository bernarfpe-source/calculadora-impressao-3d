<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CALCULADORA 3D - CB¬≤K PRESENTES</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üñ®Ô∏è</text></svg>" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }
    body { 
      background: #000000; 
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif; 
      color: #FFFFFF;
      line-height: 1.4;
      text-transform: uppercase; /* FOR√áA CAIXA ALTA GLOBAL */
    }
    /* SCROLLBAR ESTILO IOS */
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-thumb { background: #38383A; border-radius: 10px; }
    
    input[type="range"] {
      -webkit-appearance: none;
      width: 100%;
      height: 4px;
      background: #38383A;
      border-radius: 2px;
      accent-color: #0A84FF;
    }
    .ios-blur {
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      background: rgba(28, 28, 30, 0.8);
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
  <script type="text/babel">
    const { useState, useMemo } = React;

    const materialData = {
      PLA: { pricePerKg: 120, description: "MAIS COMUM" },
      ABS: { pricePerKg: 140, description: "RESISTENTE" },
      PETG: { pricePerKg: 150, description: "FLEX√çVEL" },
      TPU: { pricePerKg: 200, description: "BORRACHUDO" },
    };

    function NI({ label, value, onChange, unit }) {
      return (
        <div style={{ marginBottom: 18 }}>
          <label style={{ display: "block", fontSize: 11, fontWeight: "600", color: "#8E8E93", marginBottom: 6 }}>{label}</label>
          <div style={{ display: "flex", alignItems: "center", background: "#1C1C1E", borderRadius: 10, padding: "10px 14px", border: "0.5px solid #38383A" }}>
            <input type="number" value={value} onChange={(e) => onChange(parseFloat(e.target.value) || 0)}
              style={{ flex: 1, background: "transparent", border: "none", color: "#FFFFFF", fontSize: 16, outline: "none", fontWeight: "600" }} />
            {unit && <span style={{ color: "#8E8E93", fontSize: 13 }}>{unit}</span>}
          </div>
        </div>
      );
    }

    function CC({ label, value, icon, color = "#0A84FF", sub }) {
      return (
        <div style={{ background: "#1C1C1E", borderRadius: 14, padding: "14px", border: "0.5px solid #38383A", flex: 1 }}>
          <div style={{ fontSize: 18, marginBottom: 6 }}>{icon}</div>
          <div style={{ fontSize: 10, color: "#8E8E93", fontWeight: "700", marginBottom: 2 }}>{label}</div>
          <div style={{ fontSize: 18, fontWeight: "800", color }}>{value}</div>
          {sub && <div style={{ fontSize: 9, color: "#636366", marginTop: 2 }}>{sub}</div>}
        </div>
      );
    }

    function App() {
      const [pg, sPg] = useState(50), [th, sTh] = useState(4), [tm, sTm] = useState(30), [mat, sMat] = useState("PLA");
      const [ci, sCi] = useState(3000), [vu, sVu] = useState(5000), [pw, sPw] = useState(250), [ckw, sCkw] = useState(0.85);
      const [ml, sMl] = useState(50), [tab, sTab] = useState("PE√áA");

      const f = v => `R$ ${v.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;

      const c = useMemo(() => {
        const tH = th + tm / 60;
        const cMat = (pg / 1000) * (materialData[mat].pricePerKg);
        const cEn = (pw / 1000) * tH * ckw;
        const dep = (ci / vu) * tH;
        const cProd = cMat + cEn + dep;
        const pFin = cProd * (1 + ml / 100) / 0.85; // CONSIDERA 15% TAXAS M√âDIAS
        return { cProd, pVenda: pFin, lucro: pFin - cProd };
      }, [pg, th, tm, mat, ci, vu, pw, ckw, ml]);

      return (
        <div style={{ maxWidth: 450, margin: "0 auto", padding: "20px" }}>
          <header style={{ textAlign: "center", marginBottom: 25 }}>
            <h1 style={{ fontSize: 20, fontWeight: "800" }}>CALCULADORA 3D</h1>
            <p style={{ fontSize: 10, color: "#0A84FF", fontWeight: "700" }}>CB¬≤K PRESENTES 3D</p>
          </header>

          <div style={{ display: "flex", gap: 10, marginBottom: 20 }}>
            <CC icon="üè∑Ô∏è" label="VENDA" value={f(c.pVenda)} color="#0A84FF" />
            <CC icon="üìà" label="LUCRO" value={f(c.lucro)} color="#30D158" />
          </div>

          <div style={{ display: "flex", background: "#1C1C1E", borderRadius: 12, padding: "4px", marginBottom: 20 }}>
            {["PE√áA", "M√ÅQUINA", "LUCRO"].map(t => (
              <button key={t} onClick={() => sTab(t)} style={{
                flex: 1, padding: "8px", borderRadius: 8, border: "none", fontSize: 10, fontWeight: "800",
                background: tab === t ? "#38383A" : "transparent", color: tab === t ? "#FFF" : "#8E8E93"
              }}>{t}</button>
            ))}
          </div>

          <div style={{ background: "#1C1C1E", borderRadius: 18, padding: "20px", border: "0.5px solid #38383A" }}>
            {tab === "PE√áA" && (
              <>
                <NI label="PESO (G)" value={pg} onChange={sPg} unit="G" />
                <div style={{ display: "flex", gap: 10 }}>
                  <NI label="HORAS" value={th} onChange={sTh} unit="H" />
                  <NI label="MIN" value={tm} onChange={sTm} unit="M" />
                </div>
                <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 8 }}>
                  {Object.keys(materialData).map(m => (
                    <button key={m} onClick={() => sMat(m)} style={{
                      padding: "10px", borderRadius: 10, border: mat === m ? "2px solid #0A84FF" : "1px solid #38383A",
                      background: mat === m ? "rgba(10, 132, 255, 0.1)" : "transparent", color: "#FFF", fontSize: 11, fontWeight: "700"
                    }}>{m}</button>
                  ))}
                </div>
              </>
            )}
            {tab === "M√ÅQUINA" && (
              <>
                <NI label="CUSTO IMPRESSORA" value={ci} onChange={sCi} unit="R$" />
                <NI label="VIDA √öTIL (H)" value={vu} onChange={sVu} unit="H" />
                <NI label="KWH (R$)" value={ckw} onChange={sCkw} unit="R$" />
              </>
            )}
            {tab === "LUCRO" && (
              <>
                <label style={{ display: "block", fontSize: 11, color: "#8E8E93", marginBottom: 10 }}>MARGEM DESEJADA: {ml}%</label>
                <input type="range" min="0" max="200" value={ml} onChange={e => sMl(e.target.value)} />
              </>
            )}
          </div>

          <footer style={{ marginTop: 25 }}>
            <button style={{
              width: "100%", padding: "16px", borderRadius: 14, background: "#0A84FF", color: "#FFF",
              border: "none", fontSize: 14, fontWeight: "800"
            }}>SALVAR REGISTRO</button>
          </footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
