<!DOCTYPE html>
<html lang="pt-BR">
<head>
ย <meta charset="UTF-8" />
ย <meta name="viewport" content="width=device-width, initial-scale=1.0" />
ย <title>Calculadora de Impressรฃo 3D</title>
ย <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>๐จ๏ธ</text></svg>" />
ย <style>
ย ย * { margin: 0; padding: 0; box-sizing: border-box; }
ย ย body { background: #12121e; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }
ย </style>
</head>
<body>
ย <div id="root"></div>
ย <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
ย <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
ย <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
ย <script type="text/babel">
ย ย const { useState, useMemo, useEffect, useCallback } = React;

ย ย // Storage via localStorage
ย ย const SK = "print3d-archive";
ย ย async function ldA() { try { const v = localStorage.getItem(SK); return v ? JSON.parse(v) : []; } catch { return []; } }
ย ย async function svA(items) { try { localStorage.setItem(SK, JSON.stringify(items)); } catch(e) { console.error(e); } }

ย ย const materialData = {
ย ย ย PLA: { pricePerKg: 120, density: 1.24, description: "Mais comum, fรกcil de imprimir" },
ย ย ย ABS: { pricePerKg: 140, density: 1.04, description: "Resistente, uso industrial" },
ย ย ย PETG: { pricePerKg: 150, density: 1.27, description: "Resistente e flexรญvel" },
ย ย ย TPU: { pricePerKg: 200, density: 1.21, description: "Flexรญvel, borrachudo" },
ย ย ย Nylon: { pricePerKg: 280, density: 1.14, description: "Alta resistรชncia mecรขnica" },
ย ย ย Resina: { pricePerKg: 250, density: 1.10, description: "Alta definiรงรฃo (SLA/DLP)" },
ย ย ย ASA: { pricePerKg: 180, density: 1.07, description: "Resistente a UV, uso externo" },
ย ย ย PC: { pricePerKg: 300, density: 1.20, description: "Policarbonato, alta resistรชncia" },
ย ย };
ย ย const marketplacePresets = {
ย ย ย nenhum: { label: "Venda direta", taxa: 0, desc: "Sem marketplace" },
ย ย ย mercadolivre: { label: "Mercado Livre", taxa: 13, desc: "~11-16% s/ categoria" },
ย ย ย shopee: { label: "Shopee", taxa: 14, desc: "~12-18% + comissรฃo" },
ย ย ย amazon: { label: "Amazon", taxa: 15, desc: "~8-20% s/ categoria" },
ย ย ย custom: { label: "Personalizado", taxa: 0, desc: "Defina sua taxa" },
ย ย };
ย ย const statusOptions = [
ย ย ย { id: "verificada", label: "Verificada", color: "#00d4aa", icon: "โ" },
ย ย ย { id: "pendente", label: "Pendente", color: "#ffd43b", icon: "โณ" },
ย ย ย { id: "problema", label: "Problema", color: "#ff6b6b", icon: "โ๏ธ" },
ย ย ย { id: "favorita", label: "Favorita", color: "#e599f7", icon: "โญ" },
ย ย ];

ย ย function NI({ label, value, onChange, unit, step = 1, min = 0, helpText }) {
ย ย ย return React.createElement("div", { style: { marginBottom: 16 } },
ย ย ย ย React.createElement("label", { style: { display: "block", fontSize: 13, fontWeight: 600, color: "#c0c0c0", marginBottom: 6, letterSpacing: "0.5px", textTransform: "uppercase" } }, label),
ย ย ย ย React.createElement("div", { style: { display: "flex", alignItems: "center", gap: 8 } },
ย ย ย ย ย React.createElement("input", { type: "number", value, onChange: (e) => onChange(parseFloat(e.target.value) || 0), step, min,
ย ย ย ย ย ย style: { flex: 1, padding: "10px 14px", borderRadius: 10, border: "1px solid #3a3a4a", background: "#1e1e2e", color: "#f0f0f0", fontSize: 16, outline: "none" },
ย ย ย ย ย ย onFocus: (e) => (e.target.style.borderColor = "#7c5cfc"), onBlur: (e) => (e.target.style.borderColor = "#3a3a4a") }),
ย ย ย ย ย unit && React.createElement("span", { style: { color: "#888", fontSize: 14, minWidth: 30 } }, unit)
ย ย ย ย ),
ย ย ย ย helpText && React.createElement("span", { style: { fontSize: 11, color: "#666", marginTop: 4, display: "block" } }, helpText)
ย ย ย );
ย ย }
ย ย function SI({ label, value, onChange, min, max, step = 1, unit = "%", helpText }) {
ย ย ย return React.createElement("div", { style: { marginBottom: 16 } },
ย ย ย ย React.createElement("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 6 } },
ย ย ย ย ย React.createElement("label", { style: { fontSize: 13, fontWeight: 600, color: "#c0c0c0", letterSpacing: "0.5px", textTransform: "uppercase" } }, label),
ย ย ย ย ย React.createElement("span", { style: { fontSize: 15, fontWeight: 700, color: "#7c5cfc" } }, value + unit)
ย ย ย ย ),
ย ย ย ย React.createElement("input", { type: "range", min, max, step, value, onChange: (e) => onChange(parseFloat(e.target.value)), style: { width: "100%", accentColor: "#7c5cfc" } }),
ย ย ย ย helpText && React.createElement("span", { style: { fontSize: 11, color: "#666", marginTop: 2, display: "block" } }, helpText)
ย ย ย );
ย ย }
ย ย function CC({ label, value, icon, color = "#7c5cfc", sub }) {
ย ย ย return (<div style={{ background: "linear-gradient(135deg, #1e1e2e 0%, #2a2a3e 100%)", borderRadius: 14, padding: "14px 16px", border: `1px solid ${color}22`, flex: 1, minWidth: 120 }}>
ย ย ย ย <div style={{ fontSize: 20, marginBottom: 4 }}>{icon}</div>
ย ย ย ย <div style={{ fontSize: 10, color: "#888", textTransform: "uppercase", letterSpacing: "0.5px", marginBottom: 3 }}>{label}</div>
ย ย ย ย <div style={{ fontSize: 18, fontWeight: 800, color }}>{value}</div>
ย ย ย ย {sub && <div style={{ fontSize: 10, color: "#666", marginTop: 3 }}>{sub}</div>}
ย ย ย </div>);
ย ย }

ย ย function App() {
ย ย ย const [pg, sPg] = useState(50), [th, sTh] = useState(4), [tm, sTm] = useState(30), [mat, sMat] = useState("PLA");
ย ย ย const [ci, sCi] = useState(3000), [vu, sVu] = useState(5000), [pw, sPw] = useState(250), [ckw, sCkw] = useState(0.85);
ย ย ย const [inf, sInf] = useState(20), [fp, sFp] = useState(5);
ย ย ย const [lix, sLix] = useState(false), [pin, sPin] = useState(false), [acab, sAcab] = useState(false), [sup, sSup] = useState(true);
ย ย ย const [vhm, sVhm] = useState(30), [tsu, sTsu] = useState(15), [tpp, sTpp] = useState(20);
ย ย ย const [ml, sMl] = useState(50), [qtd, sQtd] = useState(1), [cfm, sCfm] = useState(200), [hm, sHm] = useState(200);
ย ย ย const [ff, sFf] = useState(15), [fpc, sFpc] = useState(true), [ce, sCe] = useState(3);
ย ย ย const [rt, sRt] = useState("mei"), [ac, sAc] = useState(6);
ย ย ย const [mk, sMk] = useState("nenhum"), [tmc, sTmc] = useState(15), [tfm, sTfm] = useState(0);
ย ย ย const [tab, sTab] = useState("peca");
ย ย ย const [arch, sArch] = useState([]), [aLoad, sALoad] = useState(true);
ย ย ย const [nome, sNome] = useState(""), [notas, sNotas] = useState(""), [status, sStatus] = useState("verificada");
ย ย ย const [search, sSearch] = useState(""), [filt, sFilt] = useState("todos"), [sort, sSort] = useState("data");
ย ย ย const [cdel, sCdel] = useState(null), [saved, sSaved] = useState(false);

ย ย ย useEffect(() => { ldA().then(i => { sArch(i); sALoad(false); }); }, []);

ย ย ย const aImp = useMemo(() => ({ mei:5, simples:6, presumido:11.33, real:15, informal:0, custom:ac })[rt] ?? 5, [rt, ac]);
ย ย ย const tMk = useMemo(() => mk === "nenhum" ? 0 : mk === "custom" ? tmc : marketplacePresets[mk].taxa, [mk, tmc]);

ย ย ย const c = useMemo(() => {
ย ย ย ย const m = materialData[mat], tH = th + tm / 60;
ย ย ย ย const cMat = (pg / 1000) * m.pricePerKg, cEn = (pw / 1000) * tH * ckw, dep = (ci / vu) * tH;
ย ย ย ย const cMdo = ((tsu + tpp) / 60) * vhm;
ย ย ย ย let cPos = 0; if (lix) cPos += 2.5; if (pin) cPos += 8; if (acab) cPos += 5; if (sup) cPos += 1.5;
ย ย ย ย const cFalha = (cMat + cEn) * (fp / 100), rCF = (cfm / hm) * tH, cEmb = ce, cFr = fpc ? 0 : ff;
ย ย ย ย const cProd = cMat + cEn + dep + cMdo + cPos + cFalha + rCF + cEmb + cFr;
ย ย ย ย const pBase = cProd * (1 + ml / 100), tTx = (tMk / 100) + (aImp / 100);
ย ย ย ย const pFin = tTx < 1 ? pBase / (1 - tTx) : pBase * 2;
ย ย ย ย const vImp = pFin * (aImp / 100), vMk = pFin * (tMk / 100) + tfm;
ย ย ย ย const cTot = cProd + vImp + vMk, lucro = pFin - cTot;
ย ย ย ย return { cMat, cEn, dep, cMdo, cPos, cFalha, rCF, cEmb, cFr, cProd, vImp, vMk, cTot, pVenda: pFin, lucro,
ย ย ย ย ย cTotLote: cTot * qtd, pVendaLote: pFin * qtd, lucroLote: lucro * qtd, tH, pesoTot: pg * qtd,
ย ย ย ย ย mReal: cTot > 0 ? (lucro / cTot * 100) : 0 };
ย ย ย }, [pg, th, tm, mat, ci, vu, pw, ckw, inf, fp, lix, pin, acab, sup, vhm, tsu, tpp, ml, qtd, cfm, hm, ff, fpc, ce, aImp, tMk, tfm]);

ย ย ย const doSave = useCallback(async () => {
ย ย ย ย if (!nome.trim()) return;
ย ย ย ย const np = { id: Date.now().toString(36)+Math.random().toString(36).slice(2,6), nome: nome.trim(), notas: notas.trim(), status, data: new Date().toISOString(),
ย ย ย ย ย params: { pg, th, tm, mat, inf, qtd, lix, pin, acab, sup, mk, rt, ml, fpc, ff, ce },
ย ย ย ย ย res: { cProd: c.cProd, cTot: c.cTot, pVenda: c.pVenda, lucro: c.lucro, mReal: c.mReal } };
ย ย ย ย const u = [np, ...arch]; sArch(u); await svA(u); sNome(""); sNotas(""); sSaved(true); setTimeout(() => sSaved(false), 2000);
ย ย ย }, [nome, notas, status, pg, th, tm, mat, inf, qtd, lix, pin, acab, sup, mk, rt, ml, fpc, ff, ce, c, arch]);

ย ย ย const doDelete = useCallback(async (id) => { const u = arch.filter(p => p.id !== id); sArch(u); await svA(u); sCdel(null); }, [arch]);
ย ย ย const doLoad = useCallback((p) => {
ย ย ย ย const d = p.params; sPg(d.pg); sTh(d.th); sTm(d.tm); sMat(d.mat); sInf(d.inf); sQtd(d.qtd);
ย ย ย ย sLix(d.lix); sPin(d.pin); sAcab(d.acab); sSup(d.sup); sMk(d.mk); sRt(d.rt); sMl(d.ml); sFpc(d.fpc); sFf(d.ff); sCe(d.ce); sTab("peca");
ย ย ย }, []);
ย ย ย const doStatus = useCallback(async (id, ns) => { const u = arch.map(p => p.id === id ? {...p, status: ns} : p); sArch(u); await svA(u); }, [arch]);
ย ย ย const doClear = useCallback(async () => { sArch([]); await svA([]); sCdel(null); }, []);

ย ย ย const fArch = useMemo(() => {
ย ย ย ย let it = arch;
ย ย ย ย if (filt !== "todos") it = it.filter(p => p.status === filt);
ย ย ย ย if (search.trim()) { const q = search.toLowerCase(); it = it.filter(p => p.nome.toLowerCase().includes(q) || (p.notas||"").toLowerCase().includes(q) || p.params.mat.toLowerCase().includes(q)); }
ย ย ย ย if (sort === "data") it = [...it].sort((a,b) => new Date(b.data)-new Date(a.data));
ย ย ย ย else if (sort === "nome") it = [...it].sort((a,b) => a.nome.localeCompare(b.nome));
ย ย ย ย else if (sort === "preco") it = [...it].sort((a,b) => b.res.pVenda-a.res.pVenda);
ย ย ย ย else if (sort === "lucro") it = [...it].sort((a,b) => b.res.lucro-a.res.lucro);
ย ย ย ย return it;
ย ย ย }, [arch, filt, search, sort]);

ย ย ย const aStats = useMemo(() => !arch.length ? null : ({
ย ย ย ย total: arch.length, verif: arch.filter(p => p.status === "verificada").length,
ย ย ย ย receita: arch.reduce((s,p) => s + p.res.pVenda*(p.params.qtd||1), 0),
ย ย ย ย lucro: arch.reduce((s,p) => s + p.res.lucro*(p.params.qtd||1), 0),
ย ย ย }), [arch]);

ย ย ย const f = v => `R$ ${v.toFixed(2)}`;
ย ย ย const tabs = [
ย ย ย ย { id:"peca", label:"๐ฏ Peรงa" }, { id:"custos", label:"โก Operaรงรฃo" }, { id:"mdo", label:"๐ท Mรฃo de Obra" },
ย ย ย ย { id:"acabamento", label:"โจ Acabamento" }, { id:"venda", label:"๐ฆ Venda" }, { id:"negocio", label:"๐ผ Negรณcio" },
ย ย ย ย { id:"arquivo", label:`๐๏ธ Arquivo (${arch.length})` },
ย ย ย ];
ย ย ย const bdi = [
ย ย ย ย { l:"Material", v:c.cMat, cl:"#7c5cfc" }, { l:"Energia", v:c.cEn, cl:"#00d4aa" }, { l:"Depreciaรงรฃo", v:c.dep, cl:"#ff6b6b" },
ย ย ย ย { l:"Mรฃo de obra", v:c.cMdo, cl:"#ffa94d" }, { l:"Pรณs-proc.", v:c.cPos, cl:"#74c0fc" }, { l:"Falhas", v:c.cFalha, cl:"#e599f7" },
ย ย ย ย { l:"Custos fixos", v:c.rCF, cl:"#69db7c" }, { l:"Embalagem", v:c.cEmb, cl:"#d0bfff" }, { l:"Frete", v:c.cFr, cl:"#a9e34b" },
ย ย ย ย { l:"Impostos", v:c.vImp, cl:"#ff8787" }, { l:"Marketplace", v:c.vMk, cl:"#ffd43b" },
ย ย ย ].filter(i => i.v > 0);
ย ย ย const isA = tab === "arquivo";

ย ย ย const Btn = ({children, active, color="#7c5cfc", onClick}) => (
ย ย ย ย <button onClick={onClick} style={{ padding:"8px 14px", borderRadius:8, cursor:"pointer", fontSize:12, fontWeight:600, border: active ? `2px solid ${color}` : "1px solid #3a3a4a", background: active ? `${color}18` : "#1e1e2e", color: active ? color : "#888" }}>{children}</button>
ย ย ย );

ย ย ย return (
ย ย ย ย <div style={{ minHeight:"100vh", background:"#12121e", color:"#f0f0f0", fontFamily:"'Inter',-apple-system,sans-serif" }}>
ย ย ย ย ย <div style={{ maxWidth:920, margin:"0 auto", padding:"24px 16px" }}>
ย ย ย ย ย ย <div style={{ textAlign:"center", marginBottom:28 }}>
ย ย ย ย ย ย ย <div style={{ fontSize:38, marginBottom:4 }}>๐จ๏ธ</div>
ย ย ย ย ย ย ย <h1 style={{ fontSize:26, fontWeight:800, margin:0, background:"linear-gradient(135deg,#7c5cfc,#00d4aa)", WebkitBackgroundClip:"text", WebkitTextFillColor:"transparent" }}>Calculadora de Impressรฃo 3D</h1>
ย ย ย ย ย ย ย <p style={{ color:"#666", fontSize:14, marginTop:6 }}>Calcule todos os custos e precifique suas peรงas</p>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย {!isA && <div style={{ display:"flex", gap:10, flexWrap:"wrap", marginBottom:24 }}>
ย ย ย ย ย ย ย <CC icon="๐ญ" label="Custo Produรงรฃo" value={f(c.cProd)} color="#ff6b6b" sub="Sem impostos/taxas" />
ย ย ย ย ย ย ย <CC icon="๐ฐ" label="Custo Total" value={f(c.cTot)} color="#ffa94d" sub={`${qtd}x = ${f(c.cTotLote)}`} />
ย ย ย ย ย ย ย <CC icon="๐ท๏ธ" label="Preรงo Venda" value={f(c.pVenda)} color="#00d4aa" sub={`Margem: ${c.mReal.toFixed(1)}%`} />
ย ย ย ย ย ย ย <CC icon="๐" label="Lucro Lรญquido" value={f(c.lucro)} color="#7c5cfc" sub={`Total: ${f(c.lucroLote)}`} />
ย ย ย ย ย ย </div>}
ย ย ย ย ย ย {isA && aStats && <div style={{ display:"flex", gap:10, flexWrap:"wrap", marginBottom:24 }}>
ย ย ย ย ย ย ย <CC icon="๐๏ธ" label="Total Peรงas" value={aStats.total} color="#7c5cfc" sub={`${aStats.verif} verificadas`} />
ย ย ย ย ย ย ย <CC icon="๐ฐ" label="Receita Potencial" value={f(aStats.receita)} color="#00d4aa" sub="Todas as peรงas" />
ย ย ย ย ย ย ย <CC icon="๐" label="Lucro Potencial" value={f(aStats.lucro)} color="#ffa94d" sub="Todas as peรงas" />
ย ย ย ย ย ย </div>}

ย ย ย ย ย ย <div style={{ display:"flex", gap:4, marginBottom:20, overflowX:"auto", paddingBottom:4 }}>
ย ย ย ย ย ย ย {tabs.map(t => <button key={t.id} onClick={() => sTab(t.id)} style={{
ย ย ย ย ย ย ย ย padding:"10px 16px", borderRadius:10, border:"none", fontSize:13, fontWeight:600, cursor:"pointer", whiteSpace:"nowrap",
ย ย ย ย ย ย ย ย background: tab===t.id ? (t.id==="arquivo"?"linear-gradient(135deg,#00d4aa,#0a9d80)":"linear-gradient(135deg,#7c5cfc,#5a3fd4)") : "#1e1e2e",
ย ย ย ย ย ย ย ย color: tab===t.id ? "#fff" : "#888",
ย ย ย ย ย ย ย }}>{t.label}</button>)}
ย ย ย ย ย ย </div>

ย ย ย ย ย ย {isA ? (
ย ย ย ย ย ย ย <div style={{ display:"flex", gap:20, flexWrap:"wrap" }}>
ย ย ย ย ย ย ย ย <div style={{ flex:1, minWidth:300 }}>
ย ย ย ย ย ย ย ย ย <div style={{ background:"#1a1a2e", borderRadius:16, padding:24, border:"1px solid #2a2a3e", marginBottom:20 }}>
ย ย ย ย ย ย ย ย ย ย <h3 style={{ margin:"0 0 18px", fontSize:16, color:"#00d4aa" }}>๐พ Salvar Peรงa Atual</h3>
ย ย ย ย ย ย ย ย ย ย <div style={{ marginBottom:16 }}>
ย ย ย ย ย ย ย ย ย ย ย <label style={{ display:"block", fontSize:13, fontWeight:600, color:"#c0c0c0", marginBottom:6, textTransform:"uppercase" }}>Nome da peรงa *</label>
ย ย ย ย ย ย ย ย ย ย ย <input type="text" value={nome} onChange={e => sNome(e.target.value)} placeholder="Ex: Suporte celular v2"
ย ย ย ย ย ย ย ย ย ย ย ย style={{ width:"100%", padding:"10px 14px", borderRadius:10, border:"1px solid #3a3a4a", background:"#1e1e2e", color:"#f0f0f0", fontSize:15, outline:"none", boxSizing:"border-box" }} />
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div style={{ marginBottom:16 }}>
ย ย ย ย ย ย ย ย ย ย ย <label style={{ display:"block", fontSize:13, fontWeight:600, color:"#c0c0c0", marginBottom:8, textTransform:"uppercase" }}>Status</label>
ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", gap:6, flexWrap:"wrap" }}>
ย ย ย ย ย ย ย ย ย ย ย ย {statusOptions.map(s => <Btn key={s.id} active={status===s.id} color={s.color} onClick={() => sStatus(s.id)}>{s.icon} {s.label}</Btn>)}
ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div style={{ marginBottom:16 }}>
ย ย ย ย ย ย ย ย ย ย ย <label style={{ display:"block", fontSize:13, fontWeight:600, color:"#c0c0c0", marginBottom:6, textTransform:"uppercase" }}>Observaรงรตes</label>
ย ย ย ย ย ย ย ย ย ย ย <textarea value={notas} onChange={e => sNotas(e.target.value)} placeholder="Anotaรงรตes, configs do slicer..." rows={3}
ย ย ย ย ย ย ย ย ย ย ย ย style={{ width:"100%", padding:"10px 14px", borderRadius:10, border:"1px solid #3a3a4a", background:"#1e1e2e", color:"#f0f0f0", fontSize:14, outline:"none", resize:"vertical", boxSizing:"border-box", fontFamily:"inherit" }} />
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div style={{ padding:14, background:"#12121e", borderRadius:10, border:"1px solid #2a2a3e", marginBottom:16 }}>
ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:12, color:"#888", marginBottom:8 }}>Resumo</div>
ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:6, fontSize:12 }}>
ย ย ย ย ย ย ย ย ย ย ย ย {[["Material", mat, "#7c5cfc"], ["Peso", pg+"g", "#f0f0f0"], ["Tempo", `${th}h${tm}m`, "#f0f0f0"], ["Qtd", qtd+"x", "#f0f0f0"],
ย ย ย ย ย ย ย ย ย ย ย ย ย ["Custo", f(c.cTot), "#ff6b6b"], ["Venda", f(c.pVenda), "#00d4aa"], ["Lucro", f(c.lucro), "#7c5cfc"], ["Margem", c.mReal.toFixed(1)+"%", "#ffa94d"]
ย ย ย ย ย ย ย ย ย ย ย ย ].map(([k,v,cl]) => <div key={k}><span style={{ color:"#666" }}>{k}: </span><span style={{ color:cl, fontWeight:600 }}>{v}</span></div>)}
ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <button onClick={doSave} disabled={!nome.trim()} style={{
ย ย ย ย ย ย ย ย ย ย ย width:"100%", padding:14, borderRadius:12, border:"none", fontSize:15, fontWeight:700,
ย ย ย ย ย ย ย ย ย ย ย cursor: nome.trim() ? "pointer" : "not-allowed",
ย ย ย ย ย ย ย ย ย ย ย background: nome.trim() ? (saved ? "#00d4aa" : "linear-gradient(135deg,#00d4aa,#0a9d80)") : "#2a2a3e",
ย ย ย ย ย ย ย ย ย ย ย color: nome.trim() ? "#fff" : "#555",
ย ย ย ย ย ย ย ย ย ย }}>{saved ? "โ Salva!" : "๐พ Salvar no Arquivo"}</button>
ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย {arch.length > 0 && <div style={{ padding:16, background:"#1a1a2e", borderRadius:12, border:"1px solid #ff6b6b33" }}>
ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:12, color:"#ff6b6b", marginBottom:8, fontWeight:600 }}>โ๏ธ Zona de perigo</div>
ย ย ย ย ย ย ย ย ย ย {cdel === "all" ? <div style={{ display:"flex", gap:8 }}>
ย ย ย ย ย ย ย ย ย ย ย <button onClick={doClear} style={{ flex:1, padding:10, borderRadius:8, border:"none", background:"#ff6b6b", color:"#fff", fontWeight:600, cursor:"pointer", fontSize:13 }}>Confirmar apagar tudo</button>
ย ย ย ย ย ย ย ย ย ย ย <button onClick={() => sCdel(null)} style={{ flex:1, padding:10, borderRadius:8, border:"1px solid #3a3a4a", background:"#1e1e2e", color:"#888", cursor:"pointer", fontSize:13 }}>Cancelar</button>
ย ย ย ย ย ย ย ย ย ย </div> : <button onClick={() => sCdel("all")} style={{ width:"100%", padding:10, borderRadius:8, border:"1px solid #ff6b6b44", background:"transparent", color:"#ff6b6b", fontWeight:600, cursor:"pointer", fontSize:13 }}>๐๏ธ Limpar arquivo ({arch.length} peรงas)</button>}
ย ย ย ย ย ย ย ย ย </div>}
ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย <div style={{ flex:1, minWidth:300 }}>
ย ย ย ย ย ย ย ย ย <div style={{ background:"#1a1a2e", borderRadius:16, padding:24, border:"1px solid #2a2a3e" }}>
ย ย ย ย ย ย ย ย ย ย <h3 style={{ margin:"0 0 16px", fontSize:16, color:"#f0f0f0" }}>๐๏ธ Peรงas Arquivadas</h3>
ย ย ย ย ย ย ย ย ย ย <input type="text" value={search} onChange={e => sSearch(e.target.value)} placeholder="๐ Buscar por nome, nota ou material..."
ย ย ย ย ย ย ย ย ย ย ย style={{ width:"100%", padding:"10px 14px", borderRadius:10, border:"1px solid #3a3a4a", background:"#12121e", color:"#f0f0f0", fontSize:14, outline:"none", boxSizing:"border-box", marginBottom:10 }} />
ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", gap:4, flexWrap:"wrap", marginBottom:8 }}>
ย ย ย ย ย ย ย ย ย ย ย <Btn active={filt==="todos"} onClick={() => sFilt("todos")}>Todos</Btn>
ย ย ย ย ย ย ย ย ย ย ย {statusOptions.map(s => <Btn key={s.id} active={filt===s.id} color={s.color} onClick={() => sFilt(s.id)}>{s.icon} {s.label}</Btn>)}
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", gap:4, alignItems:"center", marginBottom:16 }}>
ย ย ย ย ย ย ย ย ย ย ย <span style={{ fontSize:11, color:"#555", marginRight:4 }}>Ordenar:</span>
ย ย ย ย ย ย ย ย ย ย ย {[["data","Recente"],["nome","A-Z"],["preco","Preรงo"],["lucro","Lucro"]].map(([id,lb]) => (
ย ย ย ย ย ย ย ย ย ย ย ย <button key={id} onClick={() => sSort(id)} style={{ padding:"4px 10px", borderRadius:6, fontSize:11, fontWeight:600, cursor:"pointer", border: sort===id ? "1px solid #7c5cfc" : "1px solid #2a2a3e", background: sort===id ? "#7c5cfc18" : "transparent", color: sort===id ? "#7c5cfc" : "#555" }}>{lb}</button>
ย ย ย ย ย ย ย ย ย ย ย ))}
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย {aLoad ? <div style={{ textAlign:"center", padding:40, color:"#555" }}>Carregando...</div>
ย ย ย ย ย ย ย ย ย ย : fArch.length === 0 ? <div style={{ textAlign:"center", padding:40 }}>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:40, marginBottom:12 }}>๐ญ</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ color:"#555", fontSize:14 }}>{arch.length === 0 ? "Nenhuma peรงa salva" : "Sem resultados"}</div>
ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย : <div style={{ display:"flex", flexDirection:"column", gap:10, maxHeight:520, overflowY:"auto" }}>
ย ย ย ย ย ย ย ย ย ย ย {fArch.map(p => {
ย ย ย ย ย ย ย ย ย ย ย ย const st = statusOptions.find(s => s.id === p.status) || statusOptions[0];
ย ย ย ย ย ย ย ย ย ย ย ย const dt = new Date(p.data).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"2-digit"});
ย ย ย ย ย ย ย ย ย ย ย ย return (<div key={p.id} style={{ padding:16, background:"#12121e", borderRadius:12, border:`1px solid ${st.color}33` }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ marginBottom:10 }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:15, fontWeight:700, color:"#f0f0f0", marginBottom:4 }}>{p.nome}</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", gap:8, alignItems:"center", flexWrap:"wrap" }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span style={{ fontSize:11, color:st.color, fontWeight:600, background:`${st.color}18`, padding:"2px 8px", borderRadius:4 }}>{st.icon} {st.label}</span>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span style={{ fontSize:11, color:"#555" }}>{dt}</span>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span style={{ fontSize:11, color:"#7c5cfc", fontWeight:600 }}>{p.params.mat}</span>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span style={{ fontSize:11, color:"#888" }}>{p.params.pg}g</span>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย {p.notas && <div style={{ fontSize:12, color:"#777", marginBottom:10, fontStyle:"italic" }}>"{p.notas}"</div>}
ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr 1fr", gap:8, marginBottom:12 }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย {[["Custo",p.res.cTot,"#ff6b6b"],["Venda",p.res.pVenda,"#00d4aa"],["Lucro",p.res.lucro,"#7c5cfc"]].map(([lb,v,cl]) => (
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div key={lb} style={{ textAlign:"center", padding:8, background:"#1a1a2e", borderRadius:8 }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:10, color:"#666" }}>{lb}</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:14, fontWeight:700, color:cl }}>{f(v)}</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ))}
ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", gap:4, marginBottom:10, flexWrap:"wrap" }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย {statusOptions.map(s => <button key={s.id} onClick={() => doStatus(p.id, s.id)} style={{ padding:"4px 8px", borderRadius:4, fontSize:10, cursor:"pointer", fontWeight:600, border: p.status===s.id ? `1px solid ${s.color}` : "1px solid #2a2a3e", background: p.status===s.id ? `${s.color}22` : "transparent", color: p.status===s.id ? s.color : "#444" }}>{s.icon}</button>)}
ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", gap:8 }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button onClick={() => doLoad(p)} style={{ flex:1, padding:8, borderRadius:8, border:"1px solid #7c5cfc44", background:"#7c5cfc12", color:"#7c5cfc", fontSize:12, fontWeight:600, cursor:"pointer" }}>๐ Carregar</button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย {cdel === p.id ? <div style={{ display:"flex", gap:4 }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button onClick={() => doDelete(p.id)} style={{ padding:"8px 12px", borderRadius:8, border:"none", background:"#ff6b6b", color:"#fff", fontSize:12, fontWeight:600, cursor:"pointer" }}>Sim</button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button onClick={() => sCdel(null)} style={{ padding:"8px 12px", borderRadius:8, border:"1px solid #3a3a4a", background:"#1e1e2e", color:"#888", fontSize:12, cursor:"pointer" }}>Nรฃo</button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div> : <button onClick={() => sCdel(p.id)} style={{ padding:"8px 12px", borderRadius:8, border:"1px solid #ff6b6b33", background:"transparent", color:"#ff6b6b88", fontSize:12, cursor:"pointer" }}>๐๏ธ</button>}
ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย </div>);
ย ย ย ย ย ย ย ย ย ย ย })}
ย ย ย ย ย ย ย ย ย ย </div>}
ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ) : (
ย ย ย ย ย ย ย <div style={{ display:"flex", gap:20, flexWrap:"wrap" }}>
ย ย ย ย ย ย ย ย <div style={{ flex:1, minWidth:300 }}>
ย ย ย ย ย ย ย ย ย <div style={{ background:"#1a1a2e", borderRadius:16, padding:24, border:"1px solid #2a2a3e" }}>
ย ย ย ย ย ย ย ย ย ย {tab === "peca" && <>
ย ย ย ย ย ย ย ย ย ย ย <h3 style={{ margin:"0 0 18px", fontSize:16 }}>๐ Dados da Peรงa</h3>
ย ย ย ย ย ย ย ย ย ย ย <div style={{ marginBottom:16 }}>
ย ย ย ย ย ย ย ย ย ย ย ย <label style={{ display:"block", fontSize:13, fontWeight:600, color:"#c0c0c0", marginBottom:6, textTransform:"uppercase" }}>Material</label>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:8 }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย {Object.entries(materialData).map(([k,m]) => (
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button key={k} onClick={() => sMat(k)} style={{ padding:"10px 12px", borderRadius:10, textAlign:"left", cursor:"pointer",
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย border: mat===k ? "2px solid #7c5cfc" : "1px solid #3a3a4a", background: mat===k ? "#7c5cfc18" : "#1e1e2e", color: mat===k ? "#7c5cfc" : "#aaa", fontSize:13, fontWeight:600 }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div>{k}</div><div style={{ fontSize:10, color:"#666", marginTop:2 }}>{m.description}</div><div style={{ fontSize:10, color:"#7c5cfc", marginTop:2 }}>R$ {m.pricePerKg}/kg</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ))}
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย <NI label="Peso da peรงa" value={pg} onChange={sPg} unit="g" helpText="Peso estimado pelo slicer" />
ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", gap:12 }}><div style={{ flex:1 }}><NI label="Horas" value={th} onChange={sTh} unit="h" /></div><div style={{ flex:1 }}><NI label="Min" value={tm} onChange={sTm} unit="min" /></div></div>
ย ย ย ย ย ย ย ย ย ย ย <SI label="Infill" value={inf} onChange={sInf} min={5} max={100} step={5} helpText="Preenchimento" />
ย ย ย ย ย ย ย ย ย ย ย <NI label="Quantidade" value={qtd} onChange={sQtd} unit="un" min={1} />
ย ย ย ย ย ย ย ย ย ย </>}
ย ย ย ย ย ย ย ย ย ย {tab === "custos" && <>
ย ย ย ย ย ย ย ย ย ย ย <h3 style={{ margin:"0 0 18px", fontSize:16 }}>โก Custos Operacionais</h3>
ย ย ย ย ย ย ย ย ย ย ย <NI label="Custo da impressora" value={ci} onChange={sCi} unit="R$" step={100} helpText="Valor de compra" />
ย ย ย ย ย ย ย ย ย ย ย <NI label="Vida รบtil" value={vu} onChange={sVu} unit="h" step={100} />
ย ย ย ย ย ย ย ย ย ย ย <NI label="Potรชncia" value={pw} onChange={sPw} unit="W" step={10} />
ย ย ย ย ย ย ย ย ย ย ย <NI label="Custo kWh" value={ckw} onChange={sCkw} unit="R$/kWh" step={0.01} helpText="Veja na conta de luz" />
ย ย ย ย ย ย ย ย ย ย ย <SI label="Taxa de falha" value={fp} onChange={sFp} min={0} max={30} />
ย ย ย ย ย ย ย ย ย ย </>}
ย ย ย ย ย ย ย ย ย ย {tab === "mdo" && <>
ย ย ย ย ย ย ย ย ย ย ย <h3 style={{ margin:"0 0 18px", fontSize:16 }}>๐ท Mรฃo de Obra</h3>
ย ย ย ย ย ย ย ย ย ย ย <NI label="Valor hora" value={vhm} onChange={sVhm} unit="R$/h" step={5} />
ย ย ย ย ย ย ย ย ย ย ย <NI label="Setup" value={tsu} onChange={sTsu} unit="min" step={5} helpText="Preparar, fatiar, nivelar" />
ย ย ย ย ย ย ย ย ย ย ย <NI label="Pรณs-processamento" value={tpp} onChange={sTpp} unit="min" step={5} />
ย ย ย ย ย ย ย ย ย ย ย <div style={{ marginTop:16, padding:14, background:"#12121e", borderRadius:10, border:"1px solid #2a2a3e" }}>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:12, color:"#888" }}>Total mรฃo de obra</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:20, fontWeight:700, color:"#ffa94d" }}>{tsu+tpp} min</div>
ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย </>}
ย ย ย ย ย ย ย ย ย ย {tab === "acabamento" && <>
ย ย ย ย ย ย ย ย ย ย ย <h3 style={{ margin:"0 0 18px", fontSize:16 }}>โจ Pรณs-Processamento</h3>
ย ย ย ย ย ย ย ย ย ย ย {[["Remoรงรฃo suporte","Cortar suportes",1.5,sup,sSup],["Lixamento","Lixar superfรญcies",2.5,lix,sLix],["Pintura","Primer+tinta+verniz",8,pin,sPin],["Acabamento especial","Epรณxi, acetona",5,acab,sAcab]].map(([lb,desc,pr,st,set]) => (
ย ย ย ย ย ย ย ย ย ย ย ย <button key={lb} onClick={() => set(!st)} style={{ display:"flex", alignItems:"center", justifyContent:"space-between", width:"100%", padding:"14px 16px", marginBottom:8, borderRadius:10, cursor:"pointer",
ย ย ย ย ย ย ย ย ย ย ย ย ย border: st ? "2px solid #7c5cfc" : "1px solid #3a3a4a", background: st ? "#7c5cfc12" : "#1e1e2e", color:"#f0f0f0" }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ textAlign:"left" }}><div style={{ fontSize:14, fontWeight:600 }}>{lb}</div><div style={{ fontSize:11, color:"#666", marginTop:2 }}>{desc}</div></div>
ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ textAlign:"right" }}><div style={{ fontSize:14, fontWeight:700, color: st ? "#7c5cfc" : "#666" }}>+R$ {pr.toFixed(2)}</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ width:20, height:20, borderRadius:6, background: st?"#7c5cfc":"transparent", border: st?"none":"2px solid #3a3a4a", margin:"4px 0 0 auto", display:"flex", alignItems:"center", justifyContent:"center", fontSize:12, color:"#fff" }}>{st?"โ":""}</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย ย ย ย ))}
ย ย ย ย ย ย ย ย ย ย </>}
ย ย ย ย ย ย ย ย ย ย {tab === "venda" && <>
ย ย ย ย ย ย ย ย ย ย ย <h3 style={{ margin:"0 0 18px", fontSize:16 }}>๐ฆ Frete, Impostos e Marketplace</h3>
ย ย ย ย ย ย ย ย ย ย ย <div style={{ padding:16, background:"#12121e", borderRadius:12, border:"1px solid #2a2a3e", marginBottom:16 }}>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:13, fontWeight:700, color:"#a9e34b", marginBottom:12, textTransform:"uppercase" }}>๐ Frete e Embalagem</div>
ย ย ย ย ย ย ย ย ย ย ย ย <NI label="Embalagem" value={ce} onChange={sCe} unit="R$" step={0.5} helpText="Caixa, bolha, fita" />
ย ย ย ย ย ย ย ย ย ย ย ย <NI label="Frete" value={ff} onChange={sFf} unit="R$" helpText="Correios/transportadora" />
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", gap:8 }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย {[[true,"Cliente paga"],[false,"Frete incluso"]].map(([v,lb]) => (
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button key={String(v)} onClick={() => sFpc(v)} style={{ flex:1, padding:"10px 12px", borderRadius:10, cursor:"pointer", textAlign:"center",
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย border: fpc===v ? "2px solid #a9e34b" : "1px solid #3a3a4a", background: fpc===v ? "#a9e34b15" : "#1e1e2e", color: fpc===v ? "#a9e34b" : "#888", fontSize:13, fontWeight:600 }}>{lb}</button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ))}
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย <div style={{ padding:16, background:"#12121e", borderRadius:12, border:"1px solid #2a2a3e", marginBottom:16 }}>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:13, fontWeight:700, color:"#ff8787", marginBottom:12, textTransform:"uppercase" }}>๐๏ธ Impostos</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:8, marginBottom:12 }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย {[["informal","Informal","Sem CNPJ","0%"],["mei","MEI","Microempreendedor","~5%"],["simples","Simples","Anexo III/V","~6%"],["presumido","Presumido","ISS+PIS+COFINS","~11%"],["real","Lucro Real","Empresas maiores","~15%"],["custom","Personalizado","Sua alรญquota","โ"]].map(([id,lb,desc,rate]) => (
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button key={id} onClick={() => sRt(id)} style={{ padding:"10px 12px", borderRadius:10, cursor:"pointer", textAlign:"left",
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย border: rt===id ? "2px solid #ff8787" : "1px solid #3a3a4a", background: rt===id ? "#ff878715" : "#1e1e2e", color: rt===id ? "#ff8787" : "#aaa" }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:13, fontWeight:600 }}>{lb}</div><div style={{ fontSize:10, color:"#666", marginTop:2 }}>{desc}</div><div style={{ fontSize:11, color:"#ff8787", marginTop:2, fontWeight:700 }}>{rate}</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ))}
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย {rt === "custom" && <SI label="Alรญquota" value={ac} onChange={sAc} min={0} max={30} step={0.5} />}
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ padding:10, background:"#1a1a2e", borderRadius:8 }}><div style={{ fontSize:12, color:"#888" }}>Alรญquota efetiva</div><div style={{ fontSize:20, fontWeight:800, color:"#ff8787" }}>{aImp}%</div></div>
ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย <div style={{ padding:16, background:"#12121e", borderRadius:12, border:"1px solid #2a2a3e" }}>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:13, fontWeight:700, color:"#ffd43b", marginBottom:12, textTransform:"uppercase" }}>๐ Marketplace</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:8, marginBottom:12 }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย {Object.entries(marketplacePresets).map(([k,mp]) => (
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button key={k} onClick={() => sMk(k)} style={{ padding:"10px 12px", borderRadius:10, cursor:"pointer", textAlign:"left",
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย border: mk===k ? "2px solid #ffd43b" : "1px solid #3a3a4a", background: mk===k ? "#ffd43b15" : "#1e1e2e", color: mk===k ? "#ffd43b" : "#aaa" }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:13, fontWeight:600 }}>{mp.label}</div><div style={{ fontSize:10, color:"#666", marginTop:2 }}>{mp.desc}</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย {k!=="nenhum" && k!=="custom" && <div style={{ fontSize:11, color:"#ffd43b", marginTop:2, fontWeight:700 }}>~{mp.taxa}%</div>}
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ))}
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย {mk === "custom" && <SI label="Taxa marketplace" value={tmc} onChange={sTmc} min={0} max={40} step={0.5} />}
ย ย ย ย ย ย ย ย ย ย ย ย {mk !== "nenhum" && <NI label="Taxa fixa/venda" value={tfm} onChange={sTfm} unit="R$" step={0.5} />}
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ padding:10, background:"#1a1a2e", borderRadius:8 }}><div style={{ fontSize:12, color:"#888" }}>Taxa</div><div style={{ fontSize:20, fontWeight:800, color:"#ffd43b" }}>{tMk}%{tfm>0?` + R$${tfm.toFixed(2)}`:""}</div></div>
ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย </>}
ย ย ย ย ย ย ย ย ย ย {tab === "negocio" && <>
ย ย ย ย ย ย ย ย ย ย ย <h3 style={{ margin:"0 0 18px", fontSize:16 }}>๐ผ Negรณcio</h3>
ย ย ย ย ย ย ย ย ย ย ย <SI label="Margem de lucro" value={ml} onChange={sMl} min={0} max={200} step={5} helpText="Sobre custo de produรงรฃo" />
ย ย ย ย ย ย ย ย ย ย ย <NI label="Custos fixos/mรชs" value={cfm} onChange={sCfm} unit="R$" step={10} helpText="Aluguel, internet, software" />
ย ย ย ย ย ย ย ย ย ย ย <NI label="Horas produtivas/mรชs" value={hm} onChange={sHm} unit="h" step={10} />
ย ย ย ย ย ย ย ย ย ย ย <div style={{ marginTop:16, padding:14, background:"#12121e", borderRadius:10, border:"1px solid #2a2a3e" }}>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:12, color:"#888" }}>Custo fixo/hora</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:20, fontWeight:700, color:"#69db7c" }}>R$ {(cfm/hm).toFixed(2)}/h</div>
ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย <div style={{ marginTop:16, padding:14, background:"#12121e", borderRadius:10, border:"1px solid #ff878744" }}>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:12, color:"#888", marginBottom:8 }}>Deduรงรตes sobre venda</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", justifyContent:"space-between", marginBottom:4 }}><span style={{ fontSize:13, color:"#ccc" }}>Impostos ({aImp}%)</span><span style={{ fontSize:13, fontWeight:700, color:"#ff8787" }}>{f(c.vImp)}</span></div>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", justifyContent:"space-between", marginBottom:4 }}><span style={{ fontSize:13, color:"#ccc" }}>Marketplace ({tMk}%)</span><span style={{ fontSize:13, fontWeight:700, color:"#ffd43b" }}>{f(c.vMk)}</span></div>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ height:1, background:"#3a3a4a", margin:"8px 0" }} />
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", justifyContent:"space-between" }}><span style={{ fontSize:13, fontWeight:700 }}>Total</span><span style={{ fontSize:15, fontWeight:800, color:"#ff6b6b" }}>{f(c.vImp+c.vMk)}</span></div>
ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย </>}
ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย <div style={{ flex:1, minWidth:300 }}>
ย ย ย ย ย ย ย ย ย <div style={{ background:"#1a1a2e", borderRadius:16, padding:24, border:"1px solid #2a2a3e" }}>
ย ย ย ย ย ย ย ย ย ย <h3 style={{ margin:"0 0 18px", fontSize:16 }}>๐ Decomposiรงรฃo do Custo</h3>
ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", height:12, borderRadius:6, overflow:"hidden", marginBottom:20 }}>
ย ย ย ย ย ย ย ย ย ย ย {bdi.map(i => { const p = c.cTot > 0 ? (i.v/c.cTot)*100 : 0; return p > 0.5 ? <div key={i.l} style={{ width:`${p}%`, background:i.cl, transition:"width 0.3s" }} /> : null; })}
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย {bdi.map(i => { const p = c.cTot > 0 ? (i.v/c.cTot)*100 : 0; return (
ย ย ย ย ย ย ย ย ย ย ย <div key={i.l} style={{ display:"flex", justifyContent:"space-between", alignItems:"center", padding:"10px 0", borderBottom:"1px solid #2a2a3e" }}>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", alignItems:"center", gap:10 }}><div style={{ width:10, height:10, borderRadius:3, background:i.cl }} /><span style={{ fontSize:14, color:"#ccc" }}>{i.l}</span></div>
ย ย ย ย ย ย ย ย ย ย ย ย <div><span style={{ fontSize:14, fontWeight:700 }}>{f(i.v)}</span><span style={{ fontSize:11, color:"#666", marginLeft:8 }}>{p.toFixed(1)}%</span></div>
ย ย ย ย ย ย ย ย ย ย ย </div>); })}
ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", justifyContent:"space-between", padding:"10px 0", borderBottom:"1px solid #3a3a4a" }}>
ย ย ย ย ย ย ย ย ย ย ย <span style={{ fontSize:14, fontWeight:700, color:"#aaa" }}>Custo produรงรฃo</span><span style={{ fontSize:16, fontWeight:700, color:"#ffa94d" }}>{f(c.cProd)}</span>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", justifyContent:"space-between", padding:"14px 0", marginTop:4, borderTop:"2px solid #7c5cfc44" }}>
ย ย ย ย ย ย ย ย ย ย ย <span style={{ fontSize:16, fontWeight:800 }}>CUSTO TOTAL</span><span style={{ fontSize:20, fontWeight:800, color:"#7c5cfc" }}>{f(c.cTot)}</span>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div style={{ marginTop:16, padding:16, background:"linear-gradient(135deg,#7c5cfc15,#00d4aa15)", borderRadius:12, border:"1px solid #7c5cfc33" }}>
ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", justifyContent:"space-between", marginBottom:8 }}><span style={{ color:"#aaa", fontSize:13 }}>Preรงo venda</span><span style={{ color:"#00d4aa", fontSize:18, fontWeight:800 }}>{f(c.pVenda)}</span></div>
ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", justifyContent:"space-between", marginBottom:8 }}><span style={{ color:"#aaa", fontSize:13 }}>Lucro lรญquido</span><span style={{ color:"#7c5cfc", fontSize:16, fontWeight:700 }}>{f(c.lucro)}</span></div>
ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", justifyContent:"space-between", marginBottom:8 }}><span style={{ color:"#aaa", fontSize:13 }}>Margem real</span><span style={{ color: c.mReal>=ml?"#00d4aa":"#ff6b6b", fontSize:14, fontWeight:700 }}>{c.mReal.toFixed(1)}%</span></div>
ย ย ย ย ย ย ย ย ย ย ย {fpc && ff > 0 && <div style={{ display:"flex", justifyContent:"space-between", marginBottom:8, opacity:0.7 }}><span style={{ color:"#aaa", fontSize:12 }}>+ Frete (cliente)</span><span style={{ color:"#a9e34b", fontSize:13, fontWeight:600 }}>+ {f(ff)}</span></div>}
ย ย ย ย ย ย ย ย ย ย ย {qtd > 1 && <>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ height:1, background:"#3a3a4a", margin:"10px 0" }} />
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", justifyContent:"space-between", marginBottom:6 }}><span style={{ color:"#aaa", fontSize:13 }}>Total ({qtd}x)</span><span style={{ color:"#00d4aa", fontSize:16, fontWeight:700 }}>{f(c.pVendaLote)}</span></div>
ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ display:"flex", justifyContent:"space-between" }}><span style={{ color:"#aaa", fontSize:13 }}>Lucro total</span><span style={{ color:"#7c5cfc", fontSize:16, fontWeight:700 }}>{f(c.lucroLote)}</span></div>
ย ย ย ย ย ย ย ย ย ย ย </>}
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:10, marginTop:16 }}>
ย ย ย ย ย ย ย ย ย ย ย {[["Custo/g", pg>0?`R$ ${(c.cTot/pg).toFixed(3)}`:"โ","#ffa94d"],["Custo/h", c.tH>0?`R$ ${(c.cTot/c.tH).toFixed(2)}`:"โ","#ffa94d"],["Deprec./h",`R$ ${(ci/vu).toFixed(2)}`,"#74c0fc"],["Taxas",`${(aImp+tMk).toFixed(1)}%`,"#ff8787"]].map(([lb,v,cl]) => (
ย ย ย ย ย ย ย ย ย ย ย ย <div key={lb} style={{ padding:12, background:"#12121e", borderRadius:10, textAlign:"center" }}>
ย ย ย ย ย ย ย ย ย ย ย ย ย <div style={{ fontSize:11, color:"#666" }}>{lb}</div><div style={{ fontSize:16, fontWeight:700, color:cl }}>{v}</div>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ))}
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย )}
ย ย ย ย ย ย <div style={{ textAlign:"center", marginTop:24, padding:16, color:"#444", fontSize:12 }}>Valores estimados. Consulte um contador para alรญquotas exatas.</div>
ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย ย );
ย ย }

ย ย ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
ย </script>
</body>
</html>
